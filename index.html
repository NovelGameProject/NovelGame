<html lang="ja">
    <head>
        <meta charset="UTF-8">
        <title>ノベルゲーム(仮)</title>
<link href="https://fonts.googleapis.com/earlyaccess/roundedmplus1c.css" rel="stylesheet" />
<style type="text/css">
#canvas{
	width: 800px;
	height: 600px;
	border: 1px solid green;
}
#serif{
	position: relative;
	top: 2px;
	left: 2px;
	width: 770px;
	height: 570px;
	color: white;
	background-color: rgba(255, 255, 255, 0.0);
	padding: 10px;
	user-select: none;
	font-family: "Rounded Mplus 1c";
	font-size: 18pt;

	text-shadow: 2px 2px 1px black,
    -2px 2px 1px black,
    2px -2px 1px black,
    -2px -2px 1px black;
}
</style>
    </head>
    <body>

		<!--BGMの読み込み表-->
		<audio id="BGM1" src="Sound/bgm_maoudamashii_cyber19.mp3" loop></audio>
		<audio id="BGM2" src="Sound/bgm_maoudamashii_cyber21.mp3" loop></audio>
		<audio id="BGM3" src="Sound/bgm_maoudamashii_cyber39.mp3" loop></audio>
		<audio id="BGM4" src="Sound/bgm_maoudamashii_cyber40.mp3" loop></audio>
		<audio id="BGM5" src="Sound/game_maoudamashii_5_town27.mp3" loop></audio>
    <audio id="BGM6" src="Sound/game_maoudamashii_6_dangeon19.mp3" loop></audio>
    <audio id="BGM7" src="Sound/game_maoudamashii_6_dangeon20.mp3" loop></audio>
    <audio id="BGM8" src="Sound/game_maoudamashii_6_dangeon17.mp3" loop></audio>


        <div id="canvas">
	        <div id="serif"></div>
        </div>

        <script src="./js/jquery.min.js"></script>
        <script>

        var SCENARIO = [
           {com:"SOUBG",  val:"BGM6"}
          ,{com:"BG", val:"url(./image/title.jpg)"}
          , {com:"S",  val:"<br>"}
          , {com:"CL",  val:""}
	     , {com:"BG", val:"url(./image/sky001.jpg)"}
		, {com:"SOUBG",  val:"BGM5"}
	    , {com:"S",  val:"今日はとてもいい天気だ。<br>"}
		, {com:"S",  val:"こんな日はとてもいいことが起こりそうだと人々は言うだろう。<br>"}
    , {com:"SOUBG",  val:"BGM1"}
		, {com:"S",  val:"そんな気候とは裏腹に、私の腹具合は大荒れであった。<br>"}
		, {com:"S",  val:"何が原因なのだろうか。<br>"}
		, {com:"S",  val:"薄着をしていたせいだろうか。<br>"}
		, {com:"S",  val:"それともアイスを調子に乗って5個も食べたからだろうか。<br>"}
		, {com:"S",  val:"考えても仕方がない、一刻も早くトイレに入らなければ。<br>"}
		, {com:"S",  val:"そう思った私は、公衆トイレのある公園へ向かうことにした。<br>"}
		, {com:"CL",  val:""}
		,{com:"BG", val:"url(./image/Residential_area.png)"}
    , {com:"SOUBG",  val:"BGM2"}
		, {com:"S",  val:"歩き始めて少し経ったが、どうにも腹の痛みは増すばかりだ。<br>"}
		, {com:"S",  val:"だいたいはトイレに行く途中で一度腹痛が治まったりするものだが、今回はそうではない。<br>"}
		, {com:"S",  val:"今までにない状況で、焦りも出てきた。<br>"}
		,{com:"BG", val:"url(./image/Intersection.png)"}
		, {com:"S",  val:"一心不乱に歩いていると交差点に着いた。<br>"}
		, {com:"S",  val:"公園に行くには、ここの交差点を含めて3つの信号を越えなければならない。<br>"}
		, {com:"S",  val:"上を見上げると、信号の色は赤だった。<br>"}
		, {com:"S",  val:"それを知った時私は青ざめた。<br>"}
		, {com:"S",  val:"この信号は変わるまでに非常に時間が掛かることで有名なのだ。<br>"}
		, {com:"S",  val:"こんな経験はないだろうか。<br>"}
		, {com:"S",  val:"トイレに行きたいときは、信号の色が変わるのが遅く感じる。<br>"}
		, {com:"S",  val:"その時間は永遠にも感じられる。<br>"}
		, {com:"S",  val:"そんなできれば味わいたくない経験。<br>"}
		, {com:"CL",  val:""}
		, {com:"S",  val:"今まさに、私はそう言った状況にあるのだ。<br>"}
		, {com:"S",  val:"ただでさえ長い赤信号が、さらに長く感じる。<br>"}
		, {com:"S",  val:"私はひたすらに別のことを、週末に何をして過ごすかなどを考えながら待った。<br>"}
		, {com:"S",  val:"部屋の掃除をしようと考えだしたあたりで信号の色が青に変わる。<br>"}
		, {com:"S",  val:"私は勝利を確信した。<br>"}
		, {com:"S",  val:"この先の信号は色が変わる間隔が比較的短い。<br>"}
		, {com:"S",  val:"道の長さも、信号に引っかかる前提で約1分くらいのものである。<br>"}
		, {com:"S",  val:"車が来ないか見渡して確認し、交差点を後にした。<br>"}
		, {com:"CL",  val:""}
		,{com:"BG", val:"url(./image/Park.png)"}
    , {com:"SOUBG",  val:"BGM3"}
		, {com:"S",  val:"公園にたどり着く。<br>"}
		, {com:"S",  val:"私は急いで公衆トイレへと向かう。<br>"}
		, {com:"S",  val:"「故障中、使用不可」<br>"}
		, {com:"S",  val:"たった2つの、それでいて無慈悲な単語が私に牙を剝いた。<br>"}
		, {com:"S",  val:"目の前が真っ暗になるというのはこういうことだろう。<br>"}
		, {com:"S",  val:"ここから一番近いコンビニは駅前のものだけだ。<br>"}
		, {com:"S",  val:"駅まではここから20分掛かる。<br>"}
		, {com:"S",  val:"確実に間に合わない。<br>"}
		, {com:"S",  val:"他人の家のトイレを使わせてもらうのはどうか。<br>"}
		, {com:"S",  val:"いや、それも無しだ。<br>"}
		, {com:"CL",  val:""}
		,{com:"BG", val:"url(./image/Residential_area_Thief.png)"}
    , {com:"SOUBG",  val:"BGM2"}
		, {com:"S",  val:"最近、この辺でトイレを借りるふりをして盗みを働く狼藉者がいるらしい。<br>"}
		, {com:"S",  val:"町内会の回覧板にそんな紙が入っていた。<br>"}
		, {com:"S",  val:"私は近所付き合いがそこまで良いほうではない。<br>"}
		, {com:"S",  val:"実家暮らしなので、町内会の会合は両親に任せてきたのだ。<br>"}
		, {com:"S",  val:"恐らく、子供のころならまだしも、今の私の顔はこのあたりの住民ではわからないだろう。<br>"}
		, {com:"S",  val:"そうなると私に素直にトイレを貸してくれる人は少ないかもしれない。<br>"}
		, {com:"S",  val:"なによりも私自身の安いプライドが邪魔をする。<br>"}
		, {com:"S",  val:"泥棒と疑われることと、トイレを借りるためになりふり構わずインターホンを鳴らすこと。<br>"}
		, {com:"S",  val:"そのどちらもしたくないのだ。<br>"}
		, {com:"CL",  val:""}
		,{com:"BG", val:"url(./image/Park.png)"}
		, {com:"S",  val:"残る選択は一つしかない。<br>"}
		, {com:"S",  val:"ここから一切の問題がなく、一番近いトイレは―<br>"}
		, {com:"S",  val:"<h3>―自宅のトイレだ。</h3><br>"}
		, {com:"S",  val:"この公園からは10分前後するが、その辺でというわけにもいかない。<br>"}
		, {com:"S",  val:"何より期待していた分、気も力も緩んでいたため、躊躇っている暇がない。<br>"}
		, {com:"S",  val:"私は自宅に向かって歩き始めた。<br>"}
		, {com:"CL",  val:""}
		,{com:"BG", val:"url(./image/Residential_area.png)"}
    , {com:"SOUBG",  val:"BGM4"}
		, {com:"S",  val:"歩き始めて7分ほど経っただろうか。<br>"}
		, {com:"S",  val:"すでに自宅が見え始めた。<br>"}
		, {com:"S",  val:"今日は両親ともに出かけている。<br>"}
		, {com:"S",  val:"家に着いたら既にトイレに入られていた、なんて事もない筈だ。<br>"}
		, {com:"S",  val:"ついにこの苦しみから解放される。<br>"}
		, {com:"S",  val:"鞄の中にある鍵をまだ家に着かないうちにポケットに入れる。<br>"}
		, {com:"S",  val:"そのまま家に到着し、鍵を開けようとした時だった。<br>"}
		, {com:"CL",  val:""}
		,{com:"BG", val:"url(./image/Residential_area_middleLady.png)"}
    , {com:"SOUBG",  val:"BGM1"}
		, {com:"S",  val:"「あら、○○君じゃない！お帰りなさい～」<br>"}
		, {com:"S",  val:"このおばさんはとても話好きで、よく母と毎日2時間くらい話し込んでいるらしい。<br>"}
		, {com:"S",  val:"話も面白く、ユーモアのある人物であるとわたしは判断している。<br>"}
		, {com:"S",  val:"しかし、今話しかけられるのは最悪のタイミングだ。<br>"}
		, {com:"S",  val:"腹が痛いときに、話の長い人に捕まるなんて、もはや天が見放したとしか思えない。<br>"}
		, {com:"S",  val:"案の定おばさんは俺を相手に話を始めた。<br>"}
		, {com:"S",  val:"昔から親交のある人物なので無碍にするわけにもいかない。<br>"}
		, {com:"S",  val:"だが、早く話を切り上げなければ私は社会的に死を迎えてしまう。<br>"}
		, {com:"S",  val:"おばさんの話に適当に相槌を打ちながら、どうすればよいか考える。<br>"}
		, {com:"CL",  val:""}
		, {com:"S",  val:"いつもは母が途中で出てきて、話を引き継いでいくのだが、今日は不在だ。<br>"}
		, {com:"S",  val:"頼れる人間がいないというのはなんと心細いことか。<br>"}
		, {com:"S",  val:"故に他人に頼るという解決は不可能だ。<br>"}
		, {com:"S",  val:"では自力で、このおばさんのマシンガントークに口を挟まねばならないのか。<br>"}
		, {com:"S",  val:"いや、おばさんは今朝、確かこんなことを言っていた。<br>"}
		, {com:"S",  val:"「あなたのお母さんの話、とっても面白いのよ～」<br>"}
		, {com:"S",  val:"この発言が出るということは、母は何らかの方法でおばさんを話を聞く側に回しているはずだ。<br>"}
		, {com:"S",  val:"それも日常的に行っていることから、高等な技術はいらないと見た。<br>"}
		, {com:"S",  val:"問題はそれが何で、どのタイミングで行っているかだ。<br>"}
		, {com:"S",  val:"話が途切れたタイミングか？いや、その時が来るなら話の終わり頃だろう。<br>"}
		, {com:"S",  val:"では、話の途中か？いや、急に遮ったら失礼になるだろう。<br>"}
		, {com:"S",  val:"そんな奴の話を面白いとは言わない筈だ。<br>"}
		, {com:"CL",  val:""}
		, {com:"S",  val:"一体どのタイミングかと思案していたが、助け船はほかでもない、困らされている張本人から出た。<br>"}
		, {com:"S",  val:"「あら、よく見たら汗がすごいわねぇ、今日は早くお風呂入ったら？引き留めてごめんなさいねぇ」<br>"}
		, {com:"S",  val:"私が何かするでもなく、話は急に終わった。<br>"}
		, {com:"S",  val:"腹痛が酷かったためか、尋常ではない量の冷や汗をかいていたようだ。<br>"}
		, {com:"S",  val:"私は軽く頭を下げた後、急いで鍵を開け、家に入った。<br>"}
		,{com:"BG", val:"url(./image/House.png)"}
		, {com:"S",  val:"私は一目散にトイレに入り、悪夢と決別しようとした。<br>"}
    , {com:"SOUBG",  val:"BGM6"}
		, {com:"S",  val:"よくもこんなに苦しめやがって、などと心の中で毒づいたのがいけなかったのだろうか。<br>"}
		, {com:"S",  val:"幸か不幸か、紙がないことに便座に座る直前に気が付いた。<br>"}
		, {com:"S",  val:"全身から汗がどっと噴き出る。<br>"}
		, {com:"S",  val:"もし気づかなければここから両親が帰るまで動けなかっただろう。<br>"}
		, {com:"S",  val:"いや、自宅だから普通に歩き回ればよいとは思うのだが。<br>"}
		, {com:"S",  val:"今は緊急だから何とも思わなかったとしても、後で死にたくなりそうな気分になると思う。<br>"}
		, {com:"CL",  val:""}
		, {com:"S",  val:"とりあえず、私は2階にあるもう一つのトイレに向かった。<br>"}
		, {com:"S",  val:"こちらには紙が残っていたのを朝に覚えている。<br>"}
		, {com:"S",  val:"しかし、なんだか嫌な予感がする。<br>"}
		, {com:"S",  val:"悪い中では、幸運な出来事が起こってはいるが。<br>"}
		, {com:"S",  val:"不幸中の幸いなんてものは不幸がある時点で帳消しみたいなものだろう。<br>"}
		, {com:"S",  val:"正直、今日の運勢はひどいものだと思う。<br>"}
		, {com:"S",  val:"腹が痛くなければ、今日の幸運な出来事は普段通りの事なのだから。<br>"}
		, {com:"S",  val:"そして、予感は的中する。<br>"}
		, {com:"CL",  val:""}
		, {com:"S",  val:"こちらにも、紙は、無かった。<br>"}
    , {com:"SOUBG",  val:"BGM8"}
		, {com:"S",  val:"このとき、私は脳をフル回転させた。<br>"}
		, {com:"S",  val:"我が家では紙は買った後に、どこにしまっているか。<br>"}
		, {com:"S",  val:"しばらく日用品の買い物に付き合っていないため、答えが出ない。<br>"}
		, {com:"S",  val:"家の中でありそうな場所といえば、物置の中か、廊下の収納スペースだろう。<br>"}
		, {com:"S",  val:"ここからなら廊下の収納スペースが近い。<br>"}
		, {com:"S",  val:"頻繁に使うため、奥にしまい込んでいる可能性も低いはずだ。<br>"}
		, {com:"S",  val:"収納スペースにたどり着いた私は、中を探すが―<br>"}
    , {com:"SOUBG",  val:"BGM7"}
		, {com:"S",  val:"<h3>―無かった。</h3><br>"}
		, {com:"S",  val:"ついでに言えば物置の中にも無かった。<br>"}
		, {com:"S",  val:"何処にあるのか全く分からず、絶望感と共に、怒りもこみあげてきた。<br>"}
		, {com:"CL",  val:""}
		, {com:"S",  val:"なぜ自分がこんな目にあうのか、自分に問う。<br>"}
		, {com:"S",  val:"薄着をして、アイスを5個も食べたからである、と自答する。<br>"}
		, {com:"S",  val:"そんな無意味な問答をしていると、ドアの音がした。<br>"}
		, {com:"S",  val:"両親が帰ってきたのだ。<br>"}
		, {com:"S",  val:"急いで玄関まで迎えに行き、紙がどこにあるか聞きだした。<br>"}
		, {com:"S",  val:"どうやら、父が収納にしまい忘れたらしく、リビングに置きっぱなしになっていた。<br>"}
		, {com:"S",  val:"私はロールを半ばもぎ取るように取り出し、決戦の地へと向かった。<br>"}
		, {com:"CL",  val:""}
		,{com:"BG", val:"url(./image/Night.png)"}
    , {com:"SOUBG",  val:"BGM5"}
		, {com:"S",  val:"事なきを得た私は今日のことを振り返った。<br>"}
		, {com:"S",  val:"腹痛に始まり、信号に止められたこと、公園のトイレが故障していたこと。<br>"}
		, {com:"S",  val:"この辺に泥棒が潜んでいること、おばさんの対策を考えたこと。<br>"}
		, {com:"S",  val:"紙を無我夢中で探したこと…今思えばくだらないことだ。<br>"}
		, {com:"S",  val:"結果的には駅前のコンビニの方が早く用が済んだのでは、とも思った。<br>"}
		, {com:"S",  val:"今日はなんとか無事に危機を乗り越えることができたが、次もそうとは限らない。<br>"}
		, {com:"S",  val:"薄着はまだしも、アイスは1日1個にしよう。<br>"}
		, {com:"S",  val:"この日に自分にそう誓った。<br>"}
		, {com:"CL",  val:""}
		, {com:"S",  val:"<br><br><br><br><br><br><h1>　　　　　　　END</h1><br>"}
        ];

		var scenariotext = "";
		var bgm_id = "BGM1";

        var Novel = {
    	  cursor: 0
    	, max: 0
    	, init: function(){
        //　セリフ文
		this.max = SCENARIO.length;
		this.play();
    	}
    	, play: function(){
    		if( this.cursor >= this.max ){
    			return(false);
    		}
	        	switch(SCENARIO[this.cursor].com){
	    		// セリフ再生
		    	case "S":
				scenariotext = scenariotext +""+ SCENARIO[this.cursor].val;
				$("#serif").html(scenariotext);
				this.cursor++;
				break;

		    	// 背景変更
			    case "BG":
				$("#canvas").css("background-image", SCENARIO[this.cursor].val);
				this.cursor++;
				Novel.play();
				break;

				// BGM変更
			    case "SOUBG":
				document.getElementById(bgm_id).pause();
				document.getElementById(bgm_id).currentTime = 0;
				bgm_id = SCENARIO[this.cursor].val
				document.getElementById(bgm_id).play();
				this.cursor++;
				Novel.play();
				break;

				// SE追加
			    case "SOUSE":
				break;

				// textを消す
			    case "CL":
				scenariotext = " ";
				$("#serif").html("　");
				this.cursor++;
				Novel.play();
				break;

			    default:
				break;
		}
	}
};

$(document).ready(function(){
	Novel.init();

	$("#serif")
		.on("click", function(){
			Novel.play();
		});
});
        </script>
    </body>
</html>
